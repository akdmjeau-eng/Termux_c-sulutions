// Nada de stdio. No existe.
void kernel_main(void) {
    volatile char *video = (volatile char*) 0xb8000;

    video[0] = 'N';
    video[1] = 0x07;
    video[2] = 'H';
    video[3] = 0x07;
    video[4] = 'K';
    video[5] = 0x07;

    while (1) {
        __asm__("hlt");
    }
}
typedef struct {
    int pid;
    void (*entry)(void);
    int active;
} task_t;
#include <stdio.h>

void task1() {
    printf("Proceso 1 ejecutandose\n");
}

void task2() {
    printf("Proceso 2 ejecutandose\n");
}
task_t tasks[2];
int current = 0;

void scheduler() {
    tasks[current].entry();
    current = (current + 1) % 2;
}
int main() {
    tasks[0] = (task_t){1, task1, 1};
    tasks[1] = (task_t){2, task2, 1};

    while (1) {
        scheduler();
    }
}
// Guardar contexto
stp x0, x1, [sp, #-16]!
stp x2, x3, [sp, #-16]!
...
stp x29, x30, [sp, #-16]!

// Cambiar puntero de stack al siguiente proceso
ldr sp, [next_task_sp]

// Restaurar contexto
ldp x29, x30, [sp], #16
...
ldp x0, x1, [sp], #16

eret
